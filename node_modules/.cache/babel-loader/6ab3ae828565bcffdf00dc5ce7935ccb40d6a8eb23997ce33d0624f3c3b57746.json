{"ast":null,"code":"export default class Serializer {\n  constructor(allowedMetadataKeys) {\n    this.HEADER_LENGTH = 1;\n    this.USER_BROADCAST_PUSH_META_LENGTH = 6;\n    this.KINDS = {\n      userBroadcastPush: 3,\n      userBroadcast: 4\n    };\n    this.BINARY_ENCODING = 0;\n    this.JSON_ENCODING = 1;\n    this.BROADCAST_EVENT = 'broadcast';\n    this.allowedMetadataKeys = [];\n    this.allowedMetadataKeys = allowedMetadataKeys !== null && allowedMetadataKeys !== void 0 ? allowedMetadataKeys : [];\n  }\n  encode(msg, callback) {\n    if (msg.event === this.BROADCAST_EVENT && !(msg.payload instanceof ArrayBuffer) && typeof msg.payload.event === 'string') {\n      return callback(this._binaryEncodeUserBroadcastPush(msg));\n    }\n    let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];\n    return callback(JSON.stringify(payload));\n  }\n  _binaryEncodeUserBroadcastPush(message) {\n    var _a;\n    if (this._isArrayBuffer((_a = message.payload) === null || _a === void 0 ? void 0 : _a.payload)) {\n      return this._encodeBinaryUserBroadcastPush(message);\n    } else {\n      return this._encodeJsonUserBroadcastPush(message);\n    }\n  }\n  _encodeBinaryUserBroadcastPush(message) {\n    var _a, _b;\n    const userPayload = (_b = (_a = message.payload) === null || _a === void 0 ? void 0 : _a.payload) !== null && _b !== void 0 ? _b : new ArrayBuffer(0);\n    return this._encodeUserBroadcastPush(message, this.BINARY_ENCODING, userPayload);\n  }\n  _encodeJsonUserBroadcastPush(message) {\n    var _a, _b;\n    const userPayload = (_b = (_a = message.payload) === null || _a === void 0 ? void 0 : _a.payload) !== null && _b !== void 0 ? _b : {};\n    const encoder = new TextEncoder();\n    const encodedUserPayload = encoder.encode(JSON.stringify(userPayload)).buffer;\n    return this._encodeUserBroadcastPush(message, this.JSON_ENCODING, encodedUserPayload);\n  }\n  _encodeUserBroadcastPush(message, encodingType, encodedPayload) {\n    var _a, _b;\n    const topic = message.topic;\n    const ref = (_a = message.ref) !== null && _a !== void 0 ? _a : '';\n    const joinRef = (_b = message.join_ref) !== null && _b !== void 0 ? _b : '';\n    const userEvent = message.payload.event;\n    // Filter metadata based on allowed keys\n    const rest = this.allowedMetadataKeys ? this._pick(message.payload, this.allowedMetadataKeys) : {};\n    const metadata = Object.keys(rest).length === 0 ? '' : JSON.stringify(rest);\n    // Validate lengths don't exceed uint8 max value (255)\n    if (joinRef.length > 255) {\n      throw new Error(`joinRef length ${joinRef.length} exceeds maximum of 255`);\n    }\n    if (ref.length > 255) {\n      throw new Error(`ref length ${ref.length} exceeds maximum of 255`);\n    }\n    if (topic.length > 255) {\n      throw new Error(`topic length ${topic.length} exceeds maximum of 255`);\n    }\n    if (userEvent.length > 255) {\n      throw new Error(`userEvent length ${userEvent.length} exceeds maximum of 255`);\n    }\n    if (metadata.length > 255) {\n      throw new Error(`metadata length ${metadata.length} exceeds maximum of 255`);\n    }\n    const metaLength = this.USER_BROADCAST_PUSH_META_LENGTH + joinRef.length + ref.length + topic.length + userEvent.length + metadata.length;\n    const header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);\n    let view = new DataView(header);\n    let offset = 0;\n    view.setUint8(offset++, this.KINDS.userBroadcastPush); // kind\n    view.setUint8(offset++, joinRef.length);\n    view.setUint8(offset++, ref.length);\n    view.setUint8(offset++, topic.length);\n    view.setUint8(offset++, userEvent.length);\n    view.setUint8(offset++, metadata.length);\n    view.setUint8(offset++, encodingType);\n    Array.from(joinRef, char => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(ref, char => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(topic, char => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(userEvent, char => view.setUint8(offset++, char.charCodeAt(0)));\n    Array.from(metadata, char => view.setUint8(offset++, char.charCodeAt(0)));\n    var combined = new Uint8Array(header.byteLength + encodedPayload.byteLength);\n    combined.set(new Uint8Array(header), 0);\n    combined.set(new Uint8Array(encodedPayload), header.byteLength);\n    return combined.buffer;\n  }\n  decode(rawPayload, callback) {\n    if (this._isArrayBuffer(rawPayload)) {\n      let result = this._binaryDecode(rawPayload);\n      return callback(result);\n    }\n    if (typeof rawPayload === 'string') {\n      const jsonPayload = JSON.parse(rawPayload);\n      const [join_ref, ref, topic, event, payload] = jsonPayload;\n      return callback({\n        join_ref,\n        ref,\n        topic,\n        event,\n        payload\n      });\n    }\n    return callback({});\n  }\n  _binaryDecode(buffer) {\n    const view = new DataView(buffer);\n    const kind = view.getUint8(0);\n    const decoder = new TextDecoder();\n    switch (kind) {\n      case this.KINDS.userBroadcast:\n        return this._decodeUserBroadcast(buffer, view, decoder);\n    }\n  }\n  _decodeUserBroadcast(buffer, view, decoder) {\n    const topicSize = view.getUint8(1);\n    const userEventSize = view.getUint8(2);\n    const metadataSize = view.getUint8(3);\n    const payloadEncoding = view.getUint8(4);\n    let offset = this.HEADER_LENGTH + 4;\n    const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n    offset = offset + topicSize;\n    const userEvent = decoder.decode(buffer.slice(offset, offset + userEventSize));\n    offset = offset + userEventSize;\n    const metadata = decoder.decode(buffer.slice(offset, offset + metadataSize));\n    offset = offset + metadataSize;\n    const payload = buffer.slice(offset, buffer.byteLength);\n    const parsedPayload = payloadEncoding === this.JSON_ENCODING ? JSON.parse(decoder.decode(payload)) : payload;\n    const data = {\n      type: this.BROADCAST_EVENT,\n      event: userEvent,\n      payload: parsedPayload\n    };\n    // Metadata is optional and always JSON encoded\n    if (metadataSize > 0) {\n      data['meta'] = JSON.parse(metadata);\n    }\n    return {\n      join_ref: null,\n      ref: null,\n      topic: topic,\n      event: this.BROADCAST_EVENT,\n      payload: data\n    };\n  }\n  _isArrayBuffer(buffer) {\n    var _a;\n    return buffer instanceof ArrayBuffer || ((_a = buffer === null || buffer === void 0 ? void 0 : buffer.constructor) === null || _a === void 0 ? void 0 : _a.name) === 'ArrayBuffer';\n  }\n  _pick(obj, keys) {\n    if (!obj || typeof obj !== 'object') {\n      return {};\n    }\n    return Object.fromEntries(Object.entries(obj).filter(([key]) => keys.includes(key)));\n  }\n}","map":{"version":3,"names":["Serializer","constructor","allowedMetadataKeys","HEADER_LENGTH","USER_BROADCAST_PUSH_META_LENGTH","KINDS","userBroadcastPush","userBroadcast","BINARY_ENCODING","JSON_ENCODING","BROADCAST_EVENT","encode","msg","callback","event","payload","ArrayBuffer","_binaryEncodeUserBroadcastPush","join_ref","ref","topic","JSON","stringify","message","_isArrayBuffer","_a","_encodeBinaryUserBroadcastPush","_encodeJsonUserBroadcastPush","userPayload","_b","_encodeUserBroadcastPush","encoder","TextEncoder","encodedUserPayload","buffer","encodingType","encodedPayload","joinRef","userEvent","rest","_pick","metadata","Object","keys","length","Error","metaLength","header","view","DataView","offset","setUint8","Array","from","char","charCodeAt","combined","Uint8Array","byteLength","set","decode","rawPayload","result","_binaryDecode","jsonPayload","parse","kind","getUint8","decoder","TextDecoder","_decodeUserBroadcast","topicSize","userEventSize","metadataSize","payloadEncoding","slice","parsedPayload","data","type","name","obj","fromEntries","entries","filter","key","includes"],"sources":["/Users/ashwin/Desktop/GitHub/CFG-x-Wadhwani-AI/CFG-x-Wadhwani-AI/node_modules/@supabase/realtime-js/src/lib/serializer.ts"],"sourcesContent":["// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport type Msg<T> = {\n  join_ref?: string | null\n  ref?: string | null\n  topic: string\n  event: string\n  payload: T\n}\n\nexport default class Serializer {\n  HEADER_LENGTH = 1\n  USER_BROADCAST_PUSH_META_LENGTH = 6\n  KINDS = { userBroadcastPush: 3, userBroadcast: 4 }\n  BINARY_ENCODING = 0\n  JSON_ENCODING = 1\n  BROADCAST_EVENT = 'broadcast'\n\n  allowedMetadataKeys: string[] = []\n\n  constructor(allowedMetadataKeys?: string[] | null) {\n    this.allowedMetadataKeys = allowedMetadataKeys ?? []\n  }\n\n  encode(msg: Msg<{ [key: string]: any }>, callback: (result: ArrayBuffer | string) => any) {\n    if (\n      msg.event === this.BROADCAST_EVENT &&\n      !(msg.payload instanceof ArrayBuffer) &&\n      typeof msg.payload.event === 'string'\n    ) {\n      return callback(\n        this._binaryEncodeUserBroadcastPush(msg as Msg<{ event: string } & { [key: string]: any }>)\n      )\n    }\n\n    let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload]\n    return callback(JSON.stringify(payload))\n  }\n\n  private _binaryEncodeUserBroadcastPush(message: Msg<{ event: string } & { [key: string]: any }>) {\n    if (this._isArrayBuffer(message.payload?.payload)) {\n      return this._encodeBinaryUserBroadcastPush(message)\n    } else {\n      return this._encodeJsonUserBroadcastPush(message)\n    }\n  }\n\n  private _encodeBinaryUserBroadcastPush(message: Msg<{ event: string } & { [key: string]: any }>) {\n    const userPayload = message.payload?.payload ?? new ArrayBuffer(0)\n    return this._encodeUserBroadcastPush(message, this.BINARY_ENCODING, userPayload)\n  }\n\n  private _encodeJsonUserBroadcastPush(message: Msg<{ event: string } & { [key: string]: any }>) {\n    const userPayload = message.payload?.payload ?? {}\n    const encoder = new TextEncoder()\n    const encodedUserPayload = encoder.encode(JSON.stringify(userPayload)).buffer\n    return this._encodeUserBroadcastPush(message, this.JSON_ENCODING, encodedUserPayload)\n  }\n\n  private _encodeUserBroadcastPush(\n    message: Msg<{ event: string } & { [key: string]: any }>,\n    encodingType: number,\n    encodedPayload: ArrayBuffer\n  ) {\n    const topic = message.topic\n    const ref = message.ref ?? ''\n    const joinRef = message.join_ref ?? ''\n    const userEvent = message.payload.event\n\n    // Filter metadata based on allowed keys\n    const rest = this.allowedMetadataKeys\n      ? this._pick(message.payload, this.allowedMetadataKeys)\n      : {}\n\n    const metadata = Object.keys(rest).length === 0 ? '' : JSON.stringify(rest)\n\n    // Validate lengths don't exceed uint8 max value (255)\n    if (joinRef.length > 255) {\n      throw new Error(`joinRef length ${joinRef.length} exceeds maximum of 255`)\n    }\n    if (ref.length > 255) {\n      throw new Error(`ref length ${ref.length} exceeds maximum of 255`)\n    }\n    if (topic.length > 255) {\n      throw new Error(`topic length ${topic.length} exceeds maximum of 255`)\n    }\n    if (userEvent.length > 255) {\n      throw new Error(`userEvent length ${userEvent.length} exceeds maximum of 255`)\n    }\n    if (metadata.length > 255) {\n      throw new Error(`metadata length ${metadata.length} exceeds maximum of 255`)\n    }\n\n    const metaLength =\n      this.USER_BROADCAST_PUSH_META_LENGTH +\n      joinRef.length +\n      ref.length +\n      topic.length +\n      userEvent.length +\n      metadata.length\n\n    const header = new ArrayBuffer(this.HEADER_LENGTH + metaLength)\n    let view = new DataView(header)\n    let offset = 0\n\n    view.setUint8(offset++, this.KINDS.userBroadcastPush) // kind\n    view.setUint8(offset++, joinRef.length)\n    view.setUint8(offset++, ref.length)\n    view.setUint8(offset++, topic.length)\n    view.setUint8(offset++, userEvent.length)\n    view.setUint8(offset++, metadata.length)\n    view.setUint8(offset++, encodingType)\n    Array.from(joinRef, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(userEvent, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n    Array.from(metadata, (char) => view.setUint8(offset++, char.charCodeAt(0)))\n\n    var combined = new Uint8Array(header.byteLength + encodedPayload.byteLength)\n    combined.set(new Uint8Array(header), 0)\n    combined.set(new Uint8Array(encodedPayload), header.byteLength)\n\n    return combined.buffer\n  }\n\n  decode(rawPayload: ArrayBuffer | string, callback: Function) {\n    if (this._isArrayBuffer(rawPayload)) {\n      let result = this._binaryDecode(rawPayload as ArrayBuffer)\n      return callback(result)\n    }\n\n    if (typeof rawPayload === 'string') {\n      const jsonPayload = JSON.parse(rawPayload)\n      const [join_ref, ref, topic, event, payload] = jsonPayload\n      return callback({ join_ref, ref, topic, event, payload })\n    }\n\n    return callback({})\n  }\n\n  private _binaryDecode(buffer: ArrayBuffer) {\n    const view = new DataView(buffer)\n    const kind = view.getUint8(0)\n    const decoder = new TextDecoder()\n    switch (kind) {\n      case this.KINDS.userBroadcast:\n        return this._decodeUserBroadcast(buffer, view, decoder)\n    }\n  }\n\n  private _decodeUserBroadcast(\n    buffer: ArrayBuffer,\n    view: DataView,\n    decoder: TextDecoder\n  ): {\n    join_ref: null\n    ref: null\n    topic: string\n    event: string\n    payload: { [key: string]: any }\n  } {\n    const topicSize = view.getUint8(1)\n    const userEventSize = view.getUint8(2)\n    const metadataSize = view.getUint8(3)\n    const payloadEncoding = view.getUint8(4)\n\n    let offset = this.HEADER_LENGTH + 4\n    const topic = decoder.decode(buffer.slice(offset, offset + topicSize))\n    offset = offset + topicSize\n    const userEvent = decoder.decode(buffer.slice(offset, offset + userEventSize))\n    offset = offset + userEventSize\n    const metadata = decoder.decode(buffer.slice(offset, offset + metadataSize))\n    offset = offset + metadataSize\n\n    const payload = buffer.slice(offset, buffer.byteLength)\n    const parsedPayload =\n      payloadEncoding === this.JSON_ENCODING ? JSON.parse(decoder.decode(payload)) : payload\n\n    const data: { [key: string]: any } = {\n      type: this.BROADCAST_EVENT,\n      event: userEvent,\n      payload: parsedPayload,\n    }\n\n    // Metadata is optional and always JSON encoded\n    if (metadataSize > 0) {\n      data['meta'] = JSON.parse(metadata)\n    }\n\n    return { join_ref: null, ref: null, topic: topic, event: this.BROADCAST_EVENT, payload: data }\n  }\n\n  private _isArrayBuffer(buffer: any): boolean {\n    return buffer instanceof ArrayBuffer || buffer?.constructor?.name === 'ArrayBuffer'\n  }\n\n  private _pick(obj: Record<string, any> | null | undefined, keys: string[]): Record<string, any> {\n    if (!obj || typeof obj !== 'object') {\n      return {}\n    }\n    return Object.fromEntries(Object.entries(obj).filter(([key]) => keys.includes(key)))\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}